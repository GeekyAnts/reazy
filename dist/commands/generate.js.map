{"version":3,"sources":["../../src/commands/generate.js"],"names":["vorpal","command","autocomplete","action","args","callback","log","self","type","indexOf","prompt","name","message","choices","result","env","run","generatorOptions","description","createEnv","reazyGenerators","register","require","resolve","disableNotifyUpdate","requireFromString","src","filename","m","module","constructor","paths","_compile","exports","processArgv","clone","process","argv"],"mappings":";;;;;;;kBAwBe,UAASA,MAAT,EAAiB;AAC9BA,SACGC,OADH,CACW,aADX,EAC0B,2DAD1B,EAEGC,YAFH,CAEgB,CAAC,QAAD,EAAW,KAAX,EAAkB,QAAlB,CAFhB,EAGGC,MAHH,CAGU,UAAUC,IAAV,EAAgBC,QAAhB,EAA0B;AAChC,SAAKC,GAAL,CAAS,EAAT;AACA,QAAMC,OAAO,IAAb;AACA,QAAG,CAACH,KAAKI,IAAN,IAAc,CAAC,QAAD,EAAW,KAAX,EAAkB,QAAlB,EAA4BC,OAA5B,CAAoCL,KAAKI,IAAzC,MAAmD,CAAC,CAArE,EAAyE;AACvE,WAAKE,MAAL,CAAY;AACVF,cAAM,MADI;AAEVG,cAAM,MAFI;AAGVC,iBAAS,gCAHC;AAIVC,iBAAS,CAAC,QAAD,EAAW,KAAX,EAAkB,QAAlB;AAJC,OAAZ,EAKG,UAAUC,MAAV,EAAkB;AACnB,YAAGA,OAAON,IAAP,KAAgB,QAAnB,EAA6B;AAC3BD,eAAKD,GAAL;AACAS,cAAIC,GAAJ,CAAQ,WAAR,EAAqBC,gBAArB,EAAuCZ,QAAvC;AACD,SAHD,MAGO;AACLE,eAAKD,GAAL,CAAS,cAAT;AACA;AACD;AACF,OAbD;AAcD,KAfD,MAeO;AACL,UAAGF,KAAKI,IAAL,KAAc,QAAjB,EAA2B;AACzBO,YAAIC,GAAJ,CAAQ,WAAR,EAAqBC,gBAArB,EAAuCZ,QAAvC;AACD,OAFD,MAEO;AACLE,aAAKD,GAAL,CAAS,cAAT;AACA;AACD;AACF;AACD;AACD,GA9BH;;AAgCAN,SACGC,OADH,CACW,cADX,EAEGiB,WAFH,CAEe,kBAFf,EAGGhB,YAHH,CAGgB,CAAC,eAAD,CAHhB,EAIGC,MAJH,CAIU,UAAUC,IAAV,EAAgBC,QAAhB,EAA0B;AAChCU,QAAIC,GAAJ,CAAQ,kBAAR,EAA4BZ,IAA5B;AACD,GANH;;AAQAJ,SACGC,OADH,CACW,iBADX,EAEGiB,WAFH,CAEe,4BAFf,EAGGhB,YAHH,CAGgB,CAAC,eAAD,CAHhB,EAIGC,MAJH,CAIU,UAAUC,IAAV,EAAgBC,QAAhB,EAA0B;AAChCU,QAAIC,GAAJ,CAAQ,qBAAR,EAA+BZ,IAA/B;AACD,GANH;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,C;;AAhFD;;;;AACA;;;;;;AAEA,IAAMW,MAAM,4BAAOI,SAAP,EAAZ;;AAEA,IAAMC,kBAAkB,+BAAxB;;AAEAL,IAAIM,QAAJ,CAAaC,QAAQC,OAAR,CAAmBH,eAAnB,UAAb,EAAwD,WAAxD;AACAL,IAAIM,QAAJ,CAAaC,QAAQC,OAAR,CAAmBH,eAAnB,iBAAb,EAA+D,kBAA/D;AACAL,IAAIM,QAAJ,CAAaC,QAAQC,OAAR,CAAmBH,eAAnB,oBAAb,EAAkE,qBAAlE;;AAEA,IAAMH,mBAAmB;AACvBO,uBAAqB;AADE,CAAzB;;AAIA,SAASC,iBAAT,CAA2BC,GAA3B,EAAgCC,QAAhC,EAA0C;AACxC,MAAIC,IAAI,IAAIC,OAAOC,WAAX,EAAR;AACAF,IAAEG,KAAF,GAAUF,OAAOE,KAAjB;AACAH,IAAEI,QAAF,CAAWN,GAAX,EAAgBC,QAAhB;AACA,SAAOC,EAAEK,OAAT;AACD;;AAED,IAAMC,cAAc,iBAAEC,KAAF,CAAQC,QAAQC,IAAhB,CAApB;;QA4DStB,G,GAAAA,G","file":"generate.js","sourcesContent":["import yeoman from 'yeoman-environment';\nimport _ from 'lodash';\n\nconst env = yeoman.createEnv();\n\nconst reazyGenerators = '../reazy-generator/generators';\n\nenv.register(require.resolve(`${reazyGenerators}/app`), 'reazy:app');\nenv.register(require.resolve(`${reazyGenerators}/add-plugin`), 'reazy:add-plugin');\nenv.register(require.resolve(`${reazyGenerators}/remove-plugin`), 'reazy:remove-plugin');\n\nconst generatorOptions = {\n  disableNotifyUpdate: true\n};\n\nfunction requireFromString(src, filename) {\n  var m = new module.constructor();\n  m.paths = module.paths;\n  m._compile(src, filename);\n  return m.exports;\n}\n\nconst processArgv = _.clone(process.argv);\n\nexport default function(vorpal) {\n  vorpal\n    .command('init [type]', 'create a new app or plugin \\n\\  type: [web/mobile/plugin]')\n    .autocomplete(['mobile', 'web', 'plugin'])\n    .action(function (args, callback) {\n      this.log('');\n      const self = this;\n      if(!args.type || ['mobile', 'web', 'plugin'].indexOf(args.type) === -1 ) {\n        this.prompt({\n          type: 'list',\n          name: 'type',\n          message: 'What would you like to create?',\n          choices: ['mobile', 'web', 'plugin'],\n        }, function (result) {\n          if(result.type === 'mobile') {\n            self.log(`Okay, generating a mobile app for you`);\n            env.run('reazy:app', generatorOptions, callback);\n          } else {\n            self.log('Coming soon!');\n            // callback();\n          }\n        });\n      } else {\n        if(args.type === 'mobile') {\n          env.run('reazy:app', generatorOptions, callback);\n        } else {\n          self.log('Coming soon!');\n          // callback();\n        }\n      }\n      // env.run('reazy:app', generatorOptions);\n    });\n\n  vorpal\n    .command('add <plugin>')\n    .description('add a new plugin')\n    .autocomplete(['native-config'])\n    .action(function (args, callback) {\n      env.run('reazy:add-plugin', args);\n    });\n\n  vorpal\n    .command('remove <plugin>')\n    .description('remove a plugin completely')\n    .autocomplete(['native-config'])\n    .action(function (args, callback) {\n      env.run('reazy:remove-plugin', args);\n    });\n\n  // vorpal\n  //   .catch('[words...]', 'Catches incorrect commands')\n  //   .action(function (args, callback) {\n  //     require('babel-register');\n  //     const localProjectCli = require(process.cwd() + '/src/cli');\n  //     localProjectCli.run(processArgv, vorpal);\n  //   });\n}\n\nexport { env };\n"]}